
在学习OpenGL时，我们需要干预cocos2d-x的渲染流程，让一切变得“自定义”。

## 自定义Director

在设计中，cocos2d-x的初衷是Director是独立的且唯一的，但是核心渲染流程就在这里面，所以我们不得不让它变得可重写。

首先，添加方法  

```c++
Director* Director::setInstance(Director* ins)
{
    if (s_SharedDirector) {
        delete s_SharedDirector;
        s_SharedDirector = nullptr;
    }

    s_SharedDirector = ins;
    return s_SharedDirector;
}
```

然后将想重写的方法设置为virtual，目前只用到了drawScene  

```c++
virtual void drawScene();
```

自定义Director  

```c++
class DirectorCustom : public cocos2d::Director {
public:
    static DirectorCustom* create();
    virtual void drawScene() override;
};
```

设置自定义的Director，在`AppDelegate::applicationDidFinishLaunching`中替换  

```c++
// auto director = Director::getInstance(); 替换成下面的
auto director = Director::setInstance(DirectorCustom::create());
```

此刻，运行程序，应该看到了一个黑黑的窗口。OK，准备工作完成了
